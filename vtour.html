<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pannellum Tour 0–16 (no loops)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css" />
  <link rel="stylesheet" href="styles/Ballalompoa.css">
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>

</head>

<body>
  <div class="top-bar">
    <a href="index.html" class="go-home">← Kembali ke Beranda</a>
    <h3 class="page-title">Pannellum Virtual Tour (Scenes 0 → 16)</h3>
    <div class="top-bar__actions">
      <button class="minimap-btn" onclick="showMinimap()">Tampilkan Minimap</button>
      <button id="toggleDragBtn" class="minimap-btn">Nonaktifkan Drag</button>
    </div>
  </div>

  <!-- Modal Minimap -->
  <div id="minimapModal" class="minimap-modal" onclick="hideMinimap()">
    <img src="assets/images/minimap.jpg" alt="Minimap Virtual Tour" class="minimap-img">
  </div>

  <div id="panorama"></div>
  <div class="scenes">
    <!-- Static scene buttons without any loop -->
    <button onclick="viewer.loadScene('s0')">0</button>
    <button onclick="viewer.loadScene('s1')">1</button>
    <button onclick="viewer.loadScene('s2')">2</button>
    <button onclick="viewer.loadScene('s3')">3</button>
    <button onclick="viewer.loadScene('s4')">4</button>
    <button onclick="viewer.loadScene('s5')">5</button>
    <button onclick="viewer.loadScene('s6')">6</button>
    <button onclick="viewer.loadScene('s7')">7</button>
    <button onclick="viewer.loadScene('s8')">8</button>
    <button onclick="viewer.loadScene('s9')">9</button>
    <button onclick="viewer.loadScene('s10')">10</button>
    <button onclick="viewer.loadScene('s11')">11</button>
    <button onclick="viewer.loadScene('s12')">12</button>
    <button onclick="viewer.loadScene('s13')">13</button>
    <button onclick="viewer.loadScene('s14')">14</button>
    <button onclick="viewer.loadScene('s15')">15</button>

  </div>

  <script>

    // === Konfigurasi manual dengan hotspot eksplisit ===
    var viewer = pannellum.viewer('panorama', {
    "default": {
      "firstScene": "s0",
      "autoLoad": true,
      "showControls": true
    },
    "scenes": {
      "s0":  { 
        "title": "Spot 0",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image0.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": 4, 
          "yaw":-86.54 , 
          "type": "scene", 
          "sceneId": "s1",  
          "text": "Ke Spot 1" 
        },
        
      ] },
      "s1":  { 
        "title": "Spot 1",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image1.jpg", 
        "pitch": 14.32, 
        "yaw":-88.09 , 
        "hotSpots": [
        { 
          "pitch": 14.32, 
          "yaw":-88.09 , 
          "type": "scene", 
          "sceneId": "s2",  
          "text": "Ke Spot 2" 
        },
        {
            "pitch": -4.30,
            "yaw": -91.85,
            "type": "info",
            "text": "Tangga kecil (Tuka’ Ca’di), yang menghubungkan Paladang dengan Paddaserang Riolo terdiri atas tiga anak tangga, yang  melambangkan keseimbangan antara manusia, alam, dan Tuhan.  Bentuk  tangga  menunjukkan  unsur  matematika  seperti  persegi  panjang  pada  anak tangga dan segitiga pada kemiringannya. Ketiga anak tangga ini juga merepresentasikan tiga dunia  dalam  kosmologi  Bugis-Makassar:  dunia  atas,  dunia  tengah,  dan  dunia  bawah, menciptakan harmoni antara elemen spiritual dan praktis dalam kehidupan sehari-hari."
        },
        {
            "pitch": 16.12,
            "yaw": -107.80,
            "type": "info",
            "text": "Paladang merupakan ruangan paling depan yang terdapat di rumah adat Balla Lompoa Gowa.  Pada  masa  pemerintahan  Kerajaan  Gowa,  tamu  yang  hendak  menghadap  raja dipersilakan untuk duduk sejenak di ruang ini sebelum bertemu dengan raja. Ruangan paladang berbentuk balok dengan ukuran 5 m × 7,5 m dan memiliki tinggi teras hingga plafon sebesar 2,5 m. Ruangan ini dilengkapi dengan pintu ganda, sementara pada sisi kanan dan kiri, ruangan dibatasi  dengan  dinding  setengah  rumah  yang  dilengkapi  dengan  pengaman  berupa  terali berjumlah 15 batang."
        }
        
        
        

      ] },
      "s2" :  { 
        "title": "Spot 2",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image2.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": 10.08, 
          "yaw":-105.06 , 
          "type": "scene", 
          "sceneId": "s3",  
          "text": "Ke Spot 3" 
        },
        {
        "pitch": 4.87,
        "yaw": 86.22,
        "type": "info",  
        "text" : "Pintu  (Pakke’bu’), Pintu  ini merupakan  pintu  pertama  yang  menghubungkan  antara Paladang dan tangga (tuka'). Pintu ini adalah jenis pintu ganda yang berbentuk persegi panjang. Unsur matematika pada pintu ini dapat dilihat dari bentuknya yang berupa bangun datar, yaitu persegi panjang."
        }
        
      ] },
        "s3" :  { 
        "title": "Spot 3",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image3.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -6.85, 
          "yaw":4.54 , 
          "type": "scene", 
          "sceneId": "s4",  
          "text": "Ke Spot 4" 
        },
        { 
          "pitch": -13.08, 
          "yaw":-172.74 , 
          "type": "scene", 
          "sceneId": "s2",  
          "text": "Ke Spot 2"
        },
          
        
        

      ] },
      "s4" :  { 
        "title": "Spot 4",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image4.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": 4, 
          "yaw":-86.54 , 
          "type": "scene", 
          "sceneId": "s5",  
          "text": "Ke Spot 5" 
        },
        { 
          "pitch": 1.50, 
          "yaw":177.17 , 
          "type": "scene", 
          "sceneId": "s6",  
          "text": "Ke Spot 6" 
        },
        { 
          "pitch": -5.80, 
          "yaw":140.04 , 
          "type": "scene", 
          "sceneId": "s7",  
          "text": "Ke Spot 7" 
        },
        { 
          "pitch": -8.03, 
          "yaw":82.53 , 
          "type": "scene", 
          "sceneId": "s3",  
          "text": "Ke Spot 3" 
        }

      ] },
      "s5" :  { 
        "title": "Spot 5",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image5.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [,
        { 
          "pitch": -5.60, 
          "yaw":-92.64 , 
          "type": "scene", 
          "sceneId": "s8",  
          "text": "Ke Spot 8" 
        },
        { 
          "pitch": -0.68, 
          "yaw":-17.10 ,
          "type": "scene", 
          "sceneId": "s9",  
          "text": "Ke Spot 9"
        },
        { 
          "pitch": -4.10, 
          "yaw":155.23 , 
          "type": "scene", 
          "sceneId": "s4",  
          "text": "Ke Spot 4" 
        },

      ] },
      "s6" :  { 
        "title": "Spot 6",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image6.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -2.86, 
          "yaw":-48.89 , 
          "type": "scene", 
          "sceneId": "s6",  
          "text": "Ke Spot 6" 
        },
        { 
          "pitch": -10.07, 
          "yaw":-9.04 , 
          "type": "scene", 
          "sceneId": "s4",  
          "text": "Ke Spot 4" 
        },
        

      ] },
      "s7" :  { 
        "title": "Spot 7",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image7.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -2.86, 
          "yaw":-48.89 , 
          "type": "scene", 
          "sceneId": "s4",  
          "text": "Ke Spot 4" 
        },
        
        

      ] },
      "s8" :  { 
        "title": "Spot 8",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image8.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": 4, 
          "yaw":-86.54 , 
          "type": "scene", 
          "sceneId": "s5",  
          "text": "Ke Spot 5" 
        },
        
        

      ] },
      "s9" :  { 
        "title": "Spot 9",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image9.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": 9.37, 
          "yaw":122.54 , 
          "type": "scene", 
          "sceneId": "s10",  
          "text": "Ke Spot 10" 
        },
        { 
          "pitch": 1.60, 
          "yaw":-166.43 , 
          "type": "scene", 
          "sceneId": "s14",  
          "text": "Ke Spot 14" 
        },
        { 
          "pitch": -2.78, 
          "yaw":27.03 , 
          "type": "scene", 
          "sceneId": "s5",  
          "text": "Ke Spot 5" 
        }

        
        

      ] },
      "s10" :  { 
        "title": "Spot 10",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image10.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -0.23, 
          "yaw":-51.43 , 
          "type": "scene", 
          "sceneId": "s11",  
          "text": "Ke Spot 11" 
        },
        { 
          "pitch": -5.17, 
          "yaw":38.68 , 
          "type": "scene", 
          "sceneId": "s9",  
          "text": "Ke Spot 9" 
        }
        
        

      ] },  
     
      "s11" :  { 
        "title": "Spot 11",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image11.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -1.18, 
          "yaw":-128.36 , 
          "type": "scene", 
          "sceneId": "s12",  
          "text": "Ke Spot 12" 
        },
        { 
          "pitch": -6.61, 
          "yaw": 51.80, 
          "type": "scene", 
          "sceneId": "s10",  
          "text": "Ke Spot 10" 
        }
        
        

      ] },
      "s12" :  { 
        "title": "Spot 12",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image12.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -6.05, 
          "yaw":71.66 , 
          "type": "scene", 
          "sceneId": "s13",  
          "text": "Ke Spot 13" 
        },
        { 
          "pitch": 0.40, 
          "yaw":152.59 , 
          "type": "scene", 
          "sceneId": "s11",  
          "text": "Ke Spot 11" 
        },
        { 
          "pitch": -2.33, 
          "yaw":-106.18 , 
          "type": "scene", 
          "sceneId": "s15",  
          "text": "Ke Spot 15" 
        }
        
        

      ] },
      "s13" :  { 
        "title": "Spot 13",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image13.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -3.11, 
          "yaw":120.60 , 
          "type": "scene", 
          "sceneId": "s14",  
          "text": "Ke Spot 14" 
        },
        { 
          "pitch": -10.06, 
          "yaw":-174.47 , 
          "type": "scene", 
          "sceneId": "s12",  
          "text": "Ke Spot 12" 
        },
        { 
          "pitch": -7.64, 
          "yaw":-159.66 , 
          "type": "scene", 
          "sceneId": "s15",  
          "text": "Ke Spot 15" 
        }
        
        

      ] },
      "s14" :  { 
        "title": "Spot 14",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image14.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
        "hotSpots": [
        { 
          "pitch": -3.24, 
          "yaw":-80.99 , 
          "type": "scene", 
          "sceneId": "s9",  
          "text": "Ke Spot 9" 
        },
        { 
          "pitch": -11.60, 
          "yaw":88.05 , 
          "type": "scene", 
          "sceneId": "s13",  
          "text": "Ke Spot 13" 
        }
        
        

      ] },
      "s15" :  { 
        "title": "Spot 15",  
        "type": "equirectangular", 
        "panorama": "assets/360_images/Image15.jpg", 
        "pitch": 4, 
        "yaw":-86.54 , 
       

       "hotSpots": [
         {
          "pitch": -0.01, 
          "yaw":82.04 , 
          "type": "scene", 
          "sceneId": "s12",  
          "text": "Ke Spot 12" 
        }]
      }
    }
    });

    // Fungsi untuk menampilkan modal minimap
    function showMinimap() {
      document.getElementById('minimapModal').classList.add('active');
    }
    function hideMinimap() {
      document.getElementById('minimapModal').classList.remove('active');
    }

    // === Menampilkan koordinat pitch dan yaw saat panorama di-klik ===
    const panoramaEl = document.getElementById('panorama');
    const coordDiv = document.createElement('div');
    coordDiv.className = 'coord-hint';
    coordDiv.textContent = 'Klik panorama untuk koordinat';
    if (panoramaEl) {
      panoramaEl.appendChild(coordDiv);
    } else {
      document.body.appendChild(coordDiv);
    }
    const toggleBtn = document.getElementById('toggleDragBtn');
    const viewerContainer = typeof viewer.getContainer === 'function'
      ? viewer.getContainer()
      : panoramicFallback();

    let dragEnabled = true;

    function panoramicFallback() {
      return panoramaEl.querySelector('.pnlm-container') || panoramaEl;
    }

    function setCoordHint(message) {
      coordDiv.textContent = message;
    }

    function showCoords(event) {
      const coords = viewer.mouseEventToCoords(event);
      if (coords && Number.isFinite(coords.yaw) && Number.isFinite(coords.pitch)) {
        coordDiv.textContent = `Yaw: ${coords.yaw.toFixed(2)}, Pitch: ${coords.pitch.toFixed(2)}`;
      } else {
        const fallbackYaw = typeof viewer.getYaw === 'function' ? viewer.getYaw() : NaN;
        const fallbackPitch = typeof viewer.getPitch === 'function' ? viewer.getPitch() : NaN;
        if (Number.isFinite(fallbackYaw) && Number.isFinite(fallbackPitch)) {
          coordDiv.textContent = `Yaw: ${fallbackYaw.toFixed(2)}, Pitch: ${fallbackPitch.toFixed(2)}`;
        } else {
          setCoordHint('Tidak dapat membaca koordinat');
        }
      }
    }

    function handlePointer(event) {
      if (!dragEnabled) {
        showCoords(event);
        event.stopPropagation();
        event.preventDefault();
      }
    }

    function handleScroll(event) {
      if (!dragEnabled) {
        event.stopPropagation();
        event.preventDefault();
      }
    }

    const wheelListenerOptions = { capture: true, passive: false };

    function disableDrag() {
      dragEnabled = false;
      panoramaEl.style.cursor = 'pointer';
      viewerContainer.style.cursor = 'pointer';
      viewerContainer.addEventListener('mousedown', handlePointer, true);
      viewerContainer.addEventListener('touchstart', handlePointer, true);
      viewerContainer.addEventListener('click', handlePointer, true);
      viewerContainer.addEventListener('touchend', handlePointer, true);
      viewerContainer.addEventListener('wheel', handleScroll, wheelListenerOptions);
      toggleBtn.textContent = 'Aktifkan Drag';
      setCoordHint('Mode koordinat aktif — klik panorama');
    }

    function enableDrag() {
      dragEnabled = true;
      panoramaEl.style.cursor = 'grab';
      viewerContainer.style.cursor = 'grab';
      viewerContainer.removeEventListener('mousedown', handlePointer, true);
      viewerContainer.removeEventListener('touchstart', handlePointer, true);
      viewerContainer.removeEventListener('click', handlePointer, true);
      viewerContainer.removeEventListener('touchend', handlePointer, true);
      viewerContainer.removeEventListener('wheel', handleScroll, wheelListenerOptions);
      toggleBtn.textContent = 'Nonaktifkan Drag';
      setCoordHint('Klik panorama untuk koordinat');
    }

    toggleBtn.onclick = function () {
      if (dragEnabled) {
        disableDrag();
      } else {
        enableDrag();
      }
    };

    // Set cursor awal dan pesan bawaan
    enableDrag();

    document.addEventListener('click', () => {
      document.querySelectorAll('.hotspot-alert.is-open').forEach((node) => node.classList.remove('is-open'));
    });
  </script>

</body>

</html>